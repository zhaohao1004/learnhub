# 产品需求文档 (PRD)

## 项目名称
**LearnHub** - 在线学习平台 MVP Demo

## 1. 产品概述

LearnHub 是一个在线学习平台，旨在为用户提供沉浸式的学习体验。平台整合了视频课程、交互式文档和在线编程环境，让用户可以在一个统一的界面中完成从学习到实践的全过程。

### 核心价值
- **一体化学习体验**：视频、文档、代码实践无缝切换
- **即时反馈**：在线编写代码并立即运行验证
- **多语言支持**：支持 JavaScript/TypeScript 和 Python 等主流编程语言

## 2. 目标用户

### 主要用户群体
- **编程初学者**：希望通过视频+实践学习编程的新手
- **技能提升者**：需要系统学习新技术栈的开发者
- **教育培训机构**：需要在线教学平台的教育工作者

### 用户场景
1. 用户观看视频课程学习概念
2. 阅读配套文档深入理解
3. 在线编写代码实践验证
4. 运行测试确认学习成果

## 3. 核心功能

### 3.1 视频播放模块

#### 功能描述
提供流畅的视频播放体验，支持课程视频的在线观看。

#### 功能清单
| 功能 | 优先级 | 描述 |
|------|--------|------|
| 视频播放 | P0 | 支持_mp4/webm_格式视频播放 |
| 播放控制 | P0 | 播放/暂停/快进/快退/音量调节 |
| 进度条 | P0 | 显示播放进度，支持拖拽跳转 |
| 全屏模式 | P1 | 支持全屏播放 |
| 倍速播放 | P1 | 0.5x/1x/1.5x/2x 倍速选择 |
| 进度记忆 | P2 | 记住上次播放位置 |

#### 技术方案
- 使用 `react-player` 或 `video.js` 作为播放器
- 支持 HLS 流媒体协议（可选）

### 3.2 文档阅读模块

#### 功能描述
提供格式化的技术文档阅读体验，支持 Markdown 渲染和代码高亮。

#### 功能清单
| 功能 | 优先级 | 描述 |
|------|--------|------|
| Markdown 渲染 | P0 | 支持 GitHub Flavored Markdown |
| 代码高亮 | P0 | 支持多种编程语言语法高亮 |
| 目录导航 | P0 | 自动生成文档目录，支持锚点跳转 |
| 代码复制 | P1 | 一键复制代码块 |
| 深色模式 | P1 | 支持明暗主题切换 |
| 阅读进度 | P2 | 显示阅读进度条 |

#### 技术方案
- `react-markdown` + `remark-gfm` 处理 Markdown
- `prism-react-renderer` 实现代码高亮
- `remark-toc` 生成目录

### 3.3 在线代码编辑器模块

#### 功能描述
提供在线编程环境，支持多语言代码编写、运行和测试验证。

#### 功能清单
| 功能 | 优先级 | 描述 |
|------|--------|------|
| 代码编辑 | P0 | Monaco Editor 集成，支持语法高亮和智能提示 |
| JavaScript 运行 | P0 | 在浏览器中执行 JavaScript 代码 |
| TypeScript 运行 | P0 | 支持 TypeScript 编译运行 |
| Python 运行 | P1 | 通过 Pyodide 在浏览器中运行 Python |
| 控制台输出 | P0 | 显示代码执行结果和错误信息 |
| 代码保存 | P1 | 本地保存代码草稿 |
| 测试验证 | P1 | 运行预设测试用例验证代码正确性 |

#### 技术方案
- 编辑器：`@monaco-editor/react`
- JS/TS 执行：使用 iframe sandbox 或 Function 构造器
- Python 执行：`pyodide` (WebAssembly Python 运行时)

## 4. 技术架构

### 整体架构
```
┌─────────────────────────────────────────────────────────┐
│                    Frontend (Next.js)                    │
├─────────────┬─────────────┬─────────────┬───────────────┤
│   视频播放   │   文档阅读   │  代码编辑器  │     首页      │
│   Module    │   Module    │   Module    │   Dashboard   │
├─────────────┴─────────────┴─────────────┴───────────────┤
│                    Shared Components                      │
│         (Layout, Theme, Navigation, etc.)                │
├─────────────────────────────────────────────────────────┤
│                    Code Execution Layer                   │
│        ┌──────────────┐    ┌──────────────┐             │
│        │  JS/TS Sandbox│    │  Pyodide     │             │
│        │  (iframe)     │    │  (WASM)      │             │
│        └──────────────┘    └──────────────┘             │
└─────────────────────────────────────────────────────────┘
```

### 技术栈
| 层级 | 技术选型 |
|------|----------|
| 框架 | Next.js 14 (App Router) |
| 语言 | TypeScript |
| 样式 | Tailwind CSS |
| 状态管理 | React Context / Zustand |
| 视频播放 | react-player |
| Markdown | react-markdown + remark-gfm |
| 代码编辑器 | @monaco-editor/react |
| Python 运行 | pyodide |

### 目录结构
```
team-agents-demo/
├── docs/
│   └── PRD.md
├── src/
│   ├── app/
│   │   ├── layout.tsx
│   │   ├── page.tsx
│   │   ├── video/
│   │   │   └── [id]/
│   │   │       └── page.tsx
│   │   ├── document/
│   │   │   └── [id]/
│   │   │       └── page.tsx
│   │   └── playground/
│   │       └── page.tsx
│   ├── components/
│   │   ├── ui/                    # 通用 UI 组件
│   │   ├── video/                 # 视频播放组件
│   │   ├── document/              # 文档阅读组件
│   │   └── code-editor/           # 代码编辑器组件
│   ├── lib/
│   │   ├── sandbox/               # 代码沙箱
│   │   └── utils/                 # 工具函数
│   └── types/                     # TypeScript 类型
├── public/
│   ├── videos/                    # 示例视频
│   ├── documents/                 # 示例文档
│   └── assets/
├── package.json
├── tsconfig.json
├── tailwind.config.ts
└── CLAUDE.md
```

## 5. 里程碑规划

### MVP (v0.1.0) - 2 周
- [ ] 项目初始化和基础配置
- [ ] 视频播放模块（P0 功能）
- [ ] 文档阅读模块（P0 功能）
- [ ] 代码编辑器模块（P0 功能 - JS/TS）
- [ ] 基础页面布局和导航

### v0.2.0 - +1 周
- [ ] Python 代码执行支持
- [ ] 代码保存和加载
- [ ] 测试验证功能
- [ ] 深色模式

### v0.3.0 - +1 周
- [ ] 进度追踪
- [ ] 课程管理
- [ ] 用户数据持久化

## 6. 验收标准

### 视频播放模块
- [ ] 能够正常播放 mp4 格式视频
- [ ] 播放控制（播放/暂停/进度调整）正常工作
- [ ] 倍速播放功能正常

### 文档阅读模块
- [ ] Markdown 正确渲染，包括表格、代码块、列表
- [ ] 代码块语法高亮正确显示
- [ ] 目录导航可以正确跳转到对应章节

### 代码编辑器模块
- [ ] Monaco Editor 正常显示，支持语法高亮
- [ ] JavaScript 代码可以执行并显示输出
- [ ] TypeScript 代码可以编译执行
- [ ] Python 代码可以通过 Pyodide 执行
- [ ] 错误信息能够正确显示

### 整体
- [ ] 页面响应式布局，适配桌面端
- [ ] 各模块可以独立访问和使用
- [ ] `npm run dev` 可以正常启动开发服务器
- [ ] `npm run build` 可以正常构建生产版本

## 7. 任务分配

### Agent 任务拆分

| Agent ID | 模块 | 主要任务 |
|----------|------|----------|
| Agent-1 | 视频播放 | VideoPlayer 组件、播放控制、进度管理 |
| Agent-2 | 文档阅读 | MarkdownRenderer 组件、目录导航、代码高亮 |
| Agent-3 | 代码编辑器 | CodeEditor 组件、沙箱执行、控制台输出 |

### 依赖关系
- 所有 Agent 依赖：项目初始化完成、基础 UI 组件
- Agent-3 依赖：通用类型定义（src/types/）

## 8. 风险与约束

### 技术风险
- **Pyodide 加载时间**：Pyodide 首次加载约 10MB，需要优化加载体验
- **代码执行安全**：需要确保沙箱环境的安全性

### 约束条件
- MVP 阶段不涉及用户认证和后端服务
- 示例内容使用本地静态资源
- 浏览器兼容性：支持 Chrome、Firefox、Safari 最新版本
